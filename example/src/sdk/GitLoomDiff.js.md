<!--
<style>
.markdown-body .highlight pre, .markdown-body pre {
  background-color: #0d1117;
}
.markdown-body .diff-deletion {
  color: #f85149;
  background-color: #3c1618;
}
.markdown-body .diff-addition {
  color: #56d364;
  background-color: #1b4721;
}
</style>
-->
Auto-generated by GitLoom Diff at Tuesday, November 12, 2024 at 6:14:36 PM GMT+8

# Changes in `src/sdk/GitLoomDiff.js`

## File Statistics
```
 src/sdk/GitLoomDiff.js | 61 ++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 59 insertions(+), 2 deletions(-)

```

## Changes
```diff
diff --git a/src/sdk/GitLoomDiff.js b/src/sdk/GitLoomDiff.js
index 309c756..cbbe85d 100644
--- a/src/sdk/GitLoomDiff.js
+++ b/src/sdk/GitLoomDiff.js
@@ -2,12 +2,30 @@ const gitUtils = require('./utils/gitUtils');
 const fsUtils = require('./utils/fsUtils');
 const Config = require('./config/Config');
 
+/**
+ * GitLoomDiff generates markdown-formatted git diffs with syntax highlighting and statistics.
+ * Handles comparing git references (commits/branches/tags) and outputting formatted markdown files.
+ */
 class GitLoomDiff {
+  /**
+   * Creates a new GitLoomDiff instance with the provided configuration options.
+   * @param {Object} options - Configuration options
+   * @param {string} [options.outputDir='git-diffs'] - Directory to output the diff files
+   * @param {string[]} [options.exclude=[]] - File patterns to exclude from the diff
+   * @param {boolean} [options.darkMode=true] - Whether to use dark mode theme
+   */
   constructor(options = {}) {
     this.config = new Config(options);
   }
 
-
+  /**
+   * Runs the diff generation process.
+   * @param {string} startRange - Starting git reference (commit/branch/tag)
+   * @param {string} endRange - Ending git reference to compare against
+   * @returns {Promise<void>}
+   * @throws {Error} If git validation fails or diff generation encounters an error
+   */
   async run(startRange, endRange) {
     const { default: ora } = await import("ora");
     const spinner = ora("Generating markdown diffs...").start();
@@ -36,6 +54,15 @@ class GitLoomDiff {
     }
   }
 
+  /**
+   * Processes each changed file to generate diffs and update the index.
+   * @param {string[]} changedFiles - List of files that have changes
+   * @param {string} range - Git range to compare
+   * @param {Object} spinner - Progress spinner instance
+   * @param {string[]} index - Index content array to update
+   * @returns {Promise<void>}
+   * @private
+   */
   async #processFiles(changedFiles, range, spinner, index) {
     for (let i = 0; i < changedFiles.length; i++) {
       const file = changedFiles[i];
@@ -49,10 +76,25 @@ class GitLoomDiff {
     }
   }
 
+  /**
+   * Builds a git range string from start and end references.
+   * @param {string} startRange - Starting reference
+   * @param {string} endRange - Ending reference
+   * @returns {string} Formatted git range or empty string if no range provided
+   * @private
+   */
   #buildGitRange(startRange, endRange) {
     return startRange && endRange ? `${endRange}..${startRange}` : "";
   }
 
+  /**
+   * Builds the content for the index markdown file.
+   * @param {string} startRange - Starting reference
+   * @param {string} endRange - Ending reference
+   * @param {string} totalStats - Total change statistics
+   * @returns {Promise<string[]>} Array of index content lines
+   * @private
+   */
   async #buildIndexContent(startRange, endRange, totalStats) {
     const index = [
       "# Git Diff Summary\n",
@@ -71,12 +113,20 @@ class GitLoomDiff {
     return index;
   }
 
+  /**
+   * Generates the markdown content for a single file's diff.
+   * @param {string} file - File path
+   * @param {string} range - Git range to compare
+   * @param {string} fileInfo - File change statistics
+   * @returns {Promise<string>} Generated markdown content
+   * @private
+   */
   async #generateFileContent(file, range, fileInfo) {
     const diffOutput = await gitUtils.getFileDiff(file, range, this.config.diffFormat);
 
     return [
       this.config.getCssStyle(),
-      `generated at ${new Date().toLocaleString()} (${Intl.DateTimeFormat().resolvedOptions().timeZone})`,
+      `Auto-generated by GitLoom Diff at ${new Date().toLocaleString('en-US', { dateStyle: 'full', timeStyle: 'long', timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone })}`,
       "",
       `# Changes in \`${file}\``,
       "",
@@ -94,6 +144,13 @@ class GitLoomDiff {
     ].join("\n");
   }
 
+  /**
+   * Updates the index content with a link to a processed file.
+   * @param {string[]} index - Index content array to update
+   * @param {string} file - File path
+   * @param {string} fileInfo - File change statistics
+   * @private
+   */
   #updateIndex(index, file, fileInfo) {
     const stats = fileInfo.match(/(\d+) insertion.+(\d+) deletion/)?.[0] || "No changes";
     index.push(`- [${file}](./${file}.md) - ${stats}`);

```

